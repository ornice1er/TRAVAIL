import{a as D,b as G,c as J}from"./chunk-Q2Y3M5R2.js";import{b as O,e as V,h as B}from"./chunk-2XEKLQTD.js";import"./chunk-WNXHPA22.js";import{o as R,p as N,s as H}from"./chunk-U7Q6GFHR.js";import{a as z}from"./chunk-OUENNXIM.js";import{a as j}from"./chunk-WZANPCRV.js";import"./chunk-S6PC5DNM.js";import{a as $}from"./chunk-YFTYSB66.js";import{l as P,m as T,t as M,v as L}from"./chunk-QBXZOJLI.js";import{Ac as C,Cc as A,Db as S,Dc as I,Jb as r,Kb as n,Lb as v,Pb as b,Ub as y,Vb as c,Za as o,db as f,hc as m,ia as g,ic as F,ja as x,jc as p,ka as h,la as k,mb as w,rb as u,sc as _,uc as E,yb as q,zb as s}from"./chunk-CRPGZ22B.js";import"./chunk-GAL4ENT6.js";var U=(i,l,e)=>({id:"communique_id",itemsPerPage:i,currentPage:l,totalItems:e}),K=i=>["/communiques",i];function W(i,l){if(i&1){let e=b();r(0,"button",17),y("click",function(){let a=g(e).$implicit,d=c();return x(d.filtrerParCategorie(a))}),m(1),n()}if(i&2){let e=l.$implicit,t=c();S(t.categorieActive===e?"btn-primary":"btn-secondary"),q("aria-pressed",t.categorieActive===e)("aria-label","Filtrer par "+e),o(),p(" ",e," ")}}function X(i,l){if(i&1&&(r(0,"option",18),m(1),n()),i&2){let e=l.$implicit;s("value",e.id),o(),p(" ",e.name," ")}}function Y(i,l){if(i&1&&(r(0,"span",36),m(1),n()),i&2){let e=l.$implicit;o(),p(" #",e," ")}}function Z(i,l){if(i&1&&(r(0,"div",34),u(1,Y,2,1,"span",35),n()),i&2){let e=c().$implicit;o(),s("ngForOf",e.tags.slice(0,2))}}function ee(i,l){if(i&1&&(r(0,"article",19),v(1,"div",20),r(2,"div",21)(3,"div",22)(4,"span",23),m(5),n(),r(6,"span",24),h(),r(7,"svg",25),v(8,"path",26),n(),k(),r(9,"span"),m(10),C(11,"date"),n()()(),r(12,"a",27)(13,"h3",28),m(14),n()(),r(15,"p",29),m(16),n(),r(17,"div",30)(18,"a",27),m(19," Lire le communiqu\xE9 "),h(),r(20,"svg",31),v(21,"path",32),n()(),u(22,Z,2,1,"div",33),n()()()),i&2){let e,t=l.$implicit;o(5),p(" ",(e=t.categorie)!==null&&e!==void 0?e:"Communiqu\xE9 officiel"," "),o(5),F(I(11,7,t.created_at,"d MMMM yyyy","fr")),o(2),s("routerLink",_(11,K,t.slug)),o(2),p(" ",t.title," "),o(2),p(" ",t.sub_description," "),o(2),s("routerLink",_(13,K,t.slug)),o(4),s("ngIf",t.tags==null?null:t.tags.length)}}function te(i,l){if(i&1){let e=b();r(0,"ul",37)(1,"pagination-controls",38),y("pageChange",function(a){g(e);let d=c();return x(d.pageChanged(a))})("pageBoundsCorrection",function(a){g(e);let d=c();return x(d.pageChanged(a))}),n()()}if(i&2){let e=c();o(),s("maxSize",e.pg.total)("directionLinks",!0)("autoHide",!0)("responsive",!0)("previousLabel","Pr\xE9c\xE9dent")("nextLabel","Suivant")}}var ge=(()=>{class i{constructor(e,t,a){this.animationService=e,this.publicService=t,this.route=a,this.categorieActive=0,this.structureActive=0,this.categories=[],this.structures=[],this.communiques=[],this.communiquesFiltrees=[],this.pg={pageSize:9,page:1,total:0}}ngOnInit(){this.route.queryParams.subscribe(e=>{let t=e.nature;t?this.categorieActive=t:this.categorieActive="Toutes"}),this.getAll()}getAll(){this.publicService.getCommuniques(this.pg.pageSize,this.pg.page).subscribe(e=>{this.categories=["Toutes",...e.data?.categories],this.structures=[{id:0,name:"Toutes les structures"},...e.data?.structures],this.communiques=e.data.communiques.data,this.communiquesFiltrees=this.communiques,this.pg.total=e.data.communiques.total,this.appliquerFiltres()})}ngAfterViewInit(){setTimeout(()=>{this.animationService.initScrollAnimations()},100)}filtrerParCategorie(e){this.categorieActive=e,this.appliquerFiltres()}filtrerParStructure(e){this.structureActive=parseInt(e.target.value),this.appliquerFiltres()}appliquerFiltres(){let e=[...this.communiques];this.categorieActive!=="Toutes"&&(e=e.filter(t=>t.category===this.categorieActive)),this.structureActive!==0&&this.structureActive!==1&&(e=e.filter(t=>t.media?.structure_id===this.structureActive)),this.communiquesFiltrees=e}trackByActualiteId(e,t){return t.id}getLink(e,t){return`${j.toFile("storage")}/${e}/${t}`}pageChanged(e){this.pg.page=e,this.getAll()}static{this.\u0275fac=function(t){return new(t||i)(f($),f(z),f(O))}}static{this.\u0275cmp=w({type:i,selectors:[["app-communiques"]],decls:21,vars:12,consts:[[1,"bg-gradient-to-r","from-primary-800","to-primary-900","dark:from-primary-900","dark:to-primary-950","text-white","pt-32","pb-16"],[1,"container-custom"],[1,"text-center"],[1,"text-4xl","lg:text-5xl","font-bold","mb-6"],[1,"text-xl","text-primary-100","dark:text-primary-200","max-w-3xl","mx-auto"],["aria-label","Filtres par cat\xE9gorie",1,"py-8","bg-gray-50","dark:bg-gray-800","border-b","border-gray-200","dark:border-gray-700"],[1,"flex","flex-col","md:flex-row","items-center","justify-center","gap-6"],["role","group","aria-label","Filtrer les actualit\xE9s par cat\xE9gorie",1,"flex","flex-wrap","justify-center","gap-4"],["class","px-6 py-2 rounded-full text-sm font-medium transition-all",3,"class","click",4,"ngFor","ngForOf"],[1,"relative","w-full","md:w-auto"],["aria-label","Filtrer par structure",1,"form-select","w-full","md:w-64","dark:bg-gray-700","dark:border-gray-600","dark:text-white",3,"change"],[3,"value",4,"ngFor","ngForOf"],["aria-label","Liste des actualit\xE9s",1,"section-padding","bg-gray-50","dark:bg-gray-800"],[1,"container-custom","py-8"],["role","list",1,"space-y-6"],["class","group flex flex-col md:flex-row items-start bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-xl shadow-sm hover:shadow-md transition-all duration-300 p-6","role","listitem",4,"ngFor","ngForOf","ngForTrackBy"],["class","flex justify-center mt-12 list-none space-x-2",4,"ngIf"],[1,"px-6","py-2","rounded-full","text-sm","font-medium","transition-all",3,"click"],[3,"value"],["role","listitem",1,"group","flex","flex-col","md:flex-row","items-start","bg-white","dark:bg-gray-800","border","border-gray-200","dark:border-gray-700","rounded-xl","shadow-sm","hover:shadow-md","transition-all","duration-300","p-6"],[1,"hidden","md:block","w-2","rounded-lg","bg-primary-700","dark:bg-primary-600","mr-5","flex-shrink-0"],[1,"flex-1"],[1,"flex","flex-wrap","items-center","gap-2","text-sm","text-gray-500","dark:text-gray-400","mb-2"],[1,"bg-primary-100","dark:bg-primary-900/40","text-primary-800","dark:text-primary-300","px-2","py-0.5","rounded-full","font-medium"],[1,"flex","items-center","space-x-1"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","text-gray-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M8 7V3m8 4V3m-9 8h10m-11 5h12a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v7a2 2 0 002 2z"],[1,"inline-flex","items-center","text-primary-700","dark:text-primary-400","font-medium","hover:underline",3,"routerLink"],[1,"text-xl","font-semibold","cursor-pointer","text-gray-900","dark:text-white","mb-3","group-hover:text-primary-700","dark:group-hover:text-primary-400","transition-colors","line-clamp-2"],[1,"text-gray-600","dark:text-gray-300","text-sm","mb-4","line-clamp-3"],[1,"flex","items-center","justify-between","mt-auto"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","ml-2"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 5l7 7-7 7"],["class","flex space-x-2",4,"ngIf"],[1,"flex","space-x-2"],["class","bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 px-2 py-1 rounded-full text-xs font-medium",4,"ngFor","ngForOf"],[1,"bg-gray-100","dark:bg-gray-700","text-gray-600","dark:text-gray-300","px-2","py-1","rounded-full","text-xs","font-medium"],[1,"flex","justify-center","mt-12","list-none","space-x-2"],["id","communique_id","screenReaderPaginationLabel","Pagination","screenReaderPageLabel","page","screenReaderCurrentLabel","Page active",3,"pageChange","pageBoundsCorrection","maxSize","directionLinks","autoHide","responsive","previousLabel","nextLabel"]],template:function(t,a){t&1&&(r(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1",3),m(4,"Communiqu\xE9s"),n(),r(5,"p",4),m(6," Restez inform\xE9 des derni\xE8res nouvelles et initiatives du Minist\xE8re du Travail. "),n()()()(),r(7,"section",5)(8,"div",1)(9,"div",6)(10,"div",7),u(11,W,2,5,"button",8),n(),r(12,"div",9)(13,"select",10),y("change",function(Q){return a.filtrerParStructure(Q)}),u(14,X,2,2,"option",11),n()()()()(),r(15,"section",12)(16,"div",13)(17,"div",14),u(18,ee,23,15,"article",15),C(19,"paginate"),n(),u(20,te,2,6,"ul",16),n()()),t&2&&(o(11),s("ngForOf",a.categories),o(3),s("ngForOf",a.structures),o(4),s("ngForOf",A(19,5,a.communiquesFiltrees,E(8,U,a.pg.pageSize,a.pg.page,a.pg.total)))("ngForTrackBy",a.trackByActualiteId),o(2),s("ngIf",a.communiquesFiltrees.length>0))},dependencies:[L,P,T,M,B,V,H,R,N,J,D,G],styles:[".line-clamp-2[_ngcontent-%COMP%]{display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden}.line-clamp-3[_ngcontent-%COMP%]{display:-webkit-box;-webkit-line-clamp:3;-webkit-box-orient:vertical;overflow:hidden}"]})}}return i})();export{ge as CommuniquesComponent};
