import{a as H,b as D,c as G}from"./chunk-RJYJNXOM.js";import{a as $}from"./chunk-YKU7NWIP.js";import{a as B}from"./chunk-GT47F33O.js";import{d as O,g as V}from"./chunk-P3BJFV3S.js";import"./chunk-3LU5ELAR.js";import{n as z,o as R,r as N}from"./chunk-NNMKDKTO.js";import"./chunk-3GQN4SFB.js";import{a as j}from"./chunk-AFAOSGWK.js";import{l as A,m as T,t as M,v as L}from"./chunk-CJ4EMXTC.js";import{Ab as b,Fb as v,Gb as c,Pa as a,Qb as s,Rb as q,Sb as p,Va as _,_a as k,_b as F,aa as g,ac as E,ba as x,ca as y,da as C,db as u,gc as h,ic as I,jc as P,kb as w,lb as m,pb as S,ub as r,vb as n,wb as f}from"./chunk-ZNEMIWLE.js";import"./chunk-GAL4ENT6.js";var K=(i,l,e)=>({id:"communique_id",itemsPerPage:i,currentPage:l,totalItems:e}),Q=i=>["/communiques",i];function U(i,l){if(i&1){let e=b();r(0,"button",17),v("click",function(){let o=g(e).$implicit,d=c();return x(d.filtrerParCategorie(o))}),s(1),n()}if(i&2){let e=l.$implicit,t=c();S(t.categorieActive===e?"btn-primary":"btn-secondary"),w("aria-pressed",t.categorieActive===e)("aria-label","Filtrer par "+e),a(),p(" ",e," ")}}function W(i,l){if(i&1&&(r(0,"option",18),s(1),n()),i&2){let e=l.$implicit;m("value",e.id),a(),p(" ",e.name," ")}}function X(i,l){if(i&1&&(r(0,"span",36),s(1),n()),i&2){let e=l.$implicit;a(),p(" #",e," ")}}function Y(i,l){if(i&1&&(r(0,"div",34),u(1,X,2,1,"span",35),n()),i&2){let e=c().$implicit;a(),m("ngForOf",e.tags.slice(0,2))}}function Z(i,l){if(i&1&&(r(0,"article",19),f(1,"div",20),r(2,"div",21)(3,"div",22)(4,"span",23),s(5),n(),r(6,"span",24),y(),r(7,"svg",25),f(8,"path",26),n(),C(),r(9,"span"),s(10),h(11,"date"),n()()(),r(12,"h3",27),s(13),n(),r(14,"p",28),s(15),n(),r(16,"div",29)(17,"a",30),s(18," Lire le communiqu\xE9 "),y(),r(19,"svg",31),f(20,"path",32),n()(),u(21,Y,2,1,"div",33),n()()()),i&2){let e,t=l.$implicit;a(5),p(" ",(e=t.categorie)!==null&&e!==void 0?e:"Communiqu\xE9 officiel"," "),a(5),q(P(11,6,t.created_at,"d MMMM yyyy","fr")),a(3),p(" ",t.title," "),a(2),p(" ",t.sub_description," "),a(2),m("routerLink",F(10,Q,t.slug)),a(4),m("ngIf",t.tags==null?null:t.tags.length)}}function ee(i,l){if(i&1){let e=b();r(0,"ul",37)(1,"pagination-controls",38),v("pageChange",function(o){g(e);let d=c();return x(d.pageChanged(o))})("pageBoundsCorrection",function(o){g(e);let d=c();return x(d.pageChanged(o))}),n()()}if(i&2){let e=c();a(),m("maxSize",e.pg.total)("directionLinks",!0)("autoHide",!0)("responsive",!0)("previousLabel","Pr\xE9c\xE9dent")("nextLabel","Suivant")}}var de=(()=>{class i{constructor(e,t){this.animationService=e,this.publicService=t,this.categorieActive=0,this.structureActive=0,this.categories=[],this.structures=[],this.communiques=[],this.communiquesFiltrees=[],this.pg={pageSize:9,page:1,total:0}}ngOnInit(){this.getAll()}getAll(){this.publicService.getCommuniques(this.pg.pageSize,this.pg.page).subscribe(e=>{this.categories=["Toutes",...e.data?.categories],this.structures=[{id:0,name:"Toutes les structures"},...e.data?.structures],this.communiques=e.data.communiques.data,this.communiquesFiltrees=this.communiques,this.pg.total=e.data.communiques.total})}ngAfterViewInit(){setTimeout(()=>{this.animationService.initScrollAnimations()},100)}filtrerParCategorie(e){this.categorieActive=e,this.appliquerFiltres()}filtrerParStructure(e){this.structureActive=parseInt(e.target.value),this.appliquerFiltres()}appliquerFiltres(){let e=[...this.communiques];this.categorieActive!=="Toutes"&&(e=e.filter(t=>t.category===this.categorieActive)),this.structureActive!==0&&this.structureActive!==1&&(e=e.filter(t=>t.media?.structure_id===this.structureActive)),this.communiquesFiltrees=e}trackByActualiteId(e,t){return t.id}getLink(e,t){return`${B.toFile("storage")}/${e}/${t}`}pageChanged(e){this.pg.page=e,this.getAll()}static{this.\u0275fac=function(t){return new(t||i)(_(j),_($))}}static{this.\u0275cmp=k({type:i,selectors:[["app-communiques"]],decls:21,vars:12,consts:[[1,"bg-gradient-to-r","from-primary-800","to-primary-900","dark:from-primary-900","dark:to-primary-950","text-white","pt-32","pb-16"],[1,"container-custom"],[1,"text-center"],[1,"text-4xl","lg:text-5xl","font-bold","mb-6"],[1,"text-xl","text-primary-100","dark:text-primary-200","max-w-3xl","mx-auto"],["aria-label","Filtres par cat\xE9gorie",1,"py-8","bg-gray-50","dark:bg-gray-800","border-b","border-gray-200","dark:border-gray-700"],[1,"flex","flex-col","md:flex-row","items-center","justify-center","gap-6"],["role","group","aria-label","Filtrer les actualit\xE9s par cat\xE9gorie",1,"flex","flex-wrap","justify-center","gap-4"],["class","px-6 py-2 rounded-full text-sm font-medium transition-all",3,"class","click",4,"ngFor","ngForOf"],[1,"relative","w-full","md:w-auto"],["aria-label","Filtrer par structure",1,"form-select","w-full","md:w-64","dark:bg-gray-700","dark:border-gray-600","dark:text-white",3,"change"],[3,"value",4,"ngFor","ngForOf"],["aria-label","Liste des actualit\xE9s",1,"section-padding","bg-gray-50","dark:bg-gray-800"],[1,"container-custom","py-8"],["role","list",1,"space-y-6"],["class","group flex flex-col md:flex-row items-start bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-xl shadow-sm hover:shadow-md transition-all duration-300 p-6","role","listitem",4,"ngFor","ngForOf","ngForTrackBy"],["class","flex justify-center mt-12 list-none space-x-2",4,"ngIf"],[1,"px-6","py-2","rounded-full","text-sm","font-medium","transition-all",3,"click"],[3,"value"],["role","listitem",1,"group","flex","flex-col","md:flex-row","items-start","bg-white","dark:bg-gray-800","border","border-gray-200","dark:border-gray-700","rounded-xl","shadow-sm","hover:shadow-md","transition-all","duration-300","p-6"],[1,"hidden","md:block","w-2","rounded-lg","bg-primary-700","dark:bg-primary-600","mr-5","flex-shrink-0"],[1,"flex-1"],[1,"flex","flex-wrap","items-center","gap-2","text-sm","text-gray-500","dark:text-gray-400","mb-2"],[1,"bg-primary-100","dark:bg-primary-900/40","text-primary-800","dark:text-primary-300","px-2","py-0.5","rounded-full","font-medium"],[1,"flex","items-center","space-x-1"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","text-gray-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M8 7V3m8 4V3m-9 8h10m-11 5h12a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v7a2 2 0 002 2z"],[1,"text-xl","font-semibold","text-gray-900","dark:text-white","mb-3","group-hover:text-primary-700","dark:group-hover:text-primary-400","transition-colors","line-clamp-2"],[1,"text-gray-600","dark:text-gray-300","text-sm","mb-4","line-clamp-3"],[1,"flex","items-center","justify-between","mt-auto"],[1,"inline-flex","items-center","text-primary-700","dark:text-primary-400","font-medium","hover:underline",3,"routerLink"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","ml-2"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 5l7 7-7 7"],["class","flex space-x-2",4,"ngIf"],[1,"flex","space-x-2"],["class","bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 px-2 py-1 rounded-full text-xs font-medium",4,"ngFor","ngForOf"],[1,"bg-gray-100","dark:bg-gray-700","text-gray-600","dark:text-gray-300","px-2","py-1","rounded-full","text-xs","font-medium"],[1,"flex","justify-center","mt-12","list-none","space-x-2"],["id","communique_id","screenReaderPaginationLabel","Pagination","screenReaderPageLabel","page","screenReaderCurrentLabel","Page active",3,"pageChange","pageBoundsCorrection","maxSize","directionLinks","autoHide","responsive","previousLabel","nextLabel"]],template:function(t,o){t&1&&(r(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1",3),s(4,"Communiqu\xE9s"),n(),r(5,"p",4),s(6," Restez inform\xE9 des derni\xE8res nouvelles et initiatives du Minist\xE8re du Travail. "),n()()()(),r(7,"section",5)(8,"div",1)(9,"div",6)(10,"div",7),u(11,U,2,5,"button",8),n(),r(12,"div",9)(13,"select",10),v("change",function(J){return o.filtrerParStructure(J)}),u(14,W,2,2,"option",11),n()()()()(),r(15,"section",12)(16,"div",13)(17,"div",14),u(18,Z,22,12,"article",15),h(19,"paginate"),n(),u(20,ee,2,6,"ul",16),n()()),t&2&&(a(11),m("ngForOf",o.categories),a(3),m("ngForOf",o.structures),a(4),m("ngForOf",I(19,5,o.communiquesFiltrees,E(8,K,o.pg.pageSize,o.pg.page,o.pg.total)))("ngForTrackBy",o.trackByActualiteId),a(2),m("ngIf",o.communiquesFiltrees.length>0))},dependencies:[L,A,T,M,V,O,N,z,R,G,H,D],styles:[".line-clamp-2[_ngcontent-%COMP%]{display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden}.line-clamp-3[_ngcontent-%COMP%]{display:-webkit-box;-webkit-line-clamp:3;-webkit-box-orient:vertical;overflow:hidden}"]})}}return i})();export{de as CommuniquesComponent};
