   <div class="bg-white rounded-xl shadow-sm border border-gray-100">
     <button
    type="button"
    class="px-6 py-2 bg-gradient-to-r from-benin-green to-benin-blue text-white font-medium rounded-lg hover:shadow-lg  whitespace-nowrap font-roboto"
    (click)="add()"
  >
    Ajouter un poster
  </button>
        </div>

        <!-- Contrôles -->
        <div class="p-6 border-b border-gray-200 flex items-center justify-between">
          <div class="flex items-center space-x-4">
            <span class="text-sm text-gray-600 font-roboto">Afficher</span>
            <select (change)="loadMore($event)" class="px-3 py-1 border border-gray-300 rounded text-sm font-roboto pr-8">
              <option [value]="10">10</option>
              <option [value]="25">25</option>
              <option [value]="50">50</option>
              <option [value]="100">100</option>
            </select>
            <span class="text-sm text-gray-600 font-roboto">lignes</span>
          </div>

          <div class="flex items-center space-x-2">
            <span class="text-sm text-gray-600 font-roboto">Chercher:</span>
            <input type="text" [(ngModel)]="searchQuery" class="px-3 py-1 border border-gray-300 rounded text-sm font-roboto w-48" placeholder="Rechercher..." />
          </div>
        </div>



        <div class="flex flex-wrap items-center gap-2" *ngIf="selected_data">

  <!-- Voir détails -->
  <button
    type="button"
    pTooltip="Voir détails"
    tooltipPosition="top"
    class="px-3 py-1 text-xs font-medium text-white bg-gray-600 rounded-lg hover:bg-gray-700 focus:ring-2 focus:ring-gray-400 transition"
    (click)="show()"
  >
    Voir détails
  </button>

  <!-- Éditer -->
  <button
    type="button"
    pTooltip="Éditer"
    tooltipPosition="top"
    class="px-3 py-1 text-xs font-medium text-white bg-yellow-500 rounded-lg hover:bg-yellow-600 focus:ring-2 focus:ring-yellow-400 transition"
    (click)="edit()" 
  >
    Éditer
  </button>

  <!-- Supprimer -->
  <button
    type="button"
    pTooltip="Supprimer"
    tooltipPosition="top"
    class="px-3 py-1 text-xs font-medium text-white bg-red-600 rounded-lg hover:bg-red-700 focus:ring-2 focus:ring-red-400 transition"
    (click)="delete()" 
  >
    Supprimer
  </button>

</div>

        

        <!-- Tableau -->
        <div class="overflow-x-auto">
          <table class="w-full">
            <thead class="bg-gray-50 border-b border-gray-200">
              <tr>
                <th class="w-12 px-6 py-4 text-left">
                  <!-- <input type="checkbox" [checked]="selectedItems.length === currentActualites.length && currentActualites.length > 0" (change)="handleSelectAll()" class="w-4 h-4 text-benin-green bg-gray-100 border-gray-300 rounded focus:ring-benin-green focus:ring-2" /> -->
                </th>
                <th class="px-6 py-4 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider font-montserrat">#</th>
                <th class="px-6 py-4 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider font-montserrat">Photo</th>
                <th class="px-6 py-4 text-center text-xs font-semibold text-gray-500 uppercase tracking-wider font-montserrat">Titre</th>
                <th class="px-6 py-4 text-center text-xs font-semibold text-gray-500 uppercase tracking-wider font-montserrat">Type</th>
                <th class="px-6 py-4 text-center text-xs font-semibold text-gray-500 uppercase tracking-wider font-montserrat">Statut</th>
              </tr>
            </thead>
            <tbody class="bg-white divide-y divide-gray-200">
              <tr *ngFor="let poster of posters | sampleSearch:searchQuery | paginate: {
                                id:'ngxP1',
                                itemsPerPage: pg.pageSize,
                                currentPage: pg.page,
                                totalItems: pg.total }; let i = index" class="hover:bg-gray-50 transition-colors">
                <td class="px-6 py-4">
                  <input type="checkbox" (change)="checked(poster)" class="w-4 h-4 text-benin-green bg-gray-100 border-gray-300 rounded focus:ring-benin-green focus:ring-2" />
                </td>
                <td class="px-6 py-4 text-sm text-gray-900 font-roboto">{{i + 1}}</td>
                <td class="px-6 py-4 text-sm text-gray-900 font-roboto max-w-md">
                   <img
              [src]="getLink('posters',poster?.photo)"
              [alt]="poster?.name"
              class="w-full h-10 lg:h-30 object-cover rounded-2xl shadow-lg"
            />
                </td>
                <td class="px-6 py-4 text-center text-sm text-gray-900 font-roboto">{{poster.title}}</td>
                <td class="px-6 py-4 text-center text-sm text-gray-900 font-roboto">{{poster.type}}</td>
                <td class="px-6 py-4 text-center text-sm text-gray-900 font-roboto">
                 <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium font-roboto" [ngClass]="getStatusColor(poster.status)">{{poster.status == 'active'? 'Publié':'Non publié'}}</span>

                </td>
              </tr>
            </tbody>
          </table>
          <div class="flex items-center justify-between mt-4 text-sm text-gray-600">
            <span>
              {{ pg.total }} éléments
            </span>
            <pagination-controls 
                        id="ngxP1"
                        (pageChange)="getPage($event)"
                      [maxSize]="pg.pageSize"
                      [directionLinks]="true"
                      [autoHide]="true"
                      [responsive]="true"
                      [previousLabel]="'Précédent'"
                      [nextLabel]="'Suivant'"
                      [screenReaderPaginationLabel]="'Pagination'"
                      [screenReaderPageLabel]="'page'"
                      [screenReaderCurrentLabel]="'Vous êtes sur la page'">
                     </pagination-controls>
          </div>

        </div>

<p-dialog
  header="Enregistrer un poster"
  [(visible)]="showAddDialog"
  [modal]="true"
  [style]="{ width: '45vw' }"
  [draggable]="false"
  [resizable]="false">

  <form #addForm="ngForm" (ngSubmit)="store()">

    <div class="p-fluid grid">

      <!-- Titre -->
      <div class="col-12">
        <label class="font-semibold">Titre</label>
        <input
          pInputText
          name="title"
          [(ngModel)]="posterForm.title"
          required />
      </div>

      <!-- Type -->
      <div class="col-12">
        <label class="font-semibold">Type</label>
        <select
          class="p-inputtext w-full"
          name="type"
          [(ngModel)]="posterForm.type"
          required>
          <option value="image">Image</option>
          <option value="video">Vidéo</option>
          <option value="lien">Lien externe</option>
        </select>
      </div>

      <!-- Image -->
      <div class="col-12" *ngIf="posterForm.type === 'image'">
        <label class="font-semibold">Image</label>
        <input
          type="file"
          class="p-inputtext w-full"
          (change)="onFileSelect($event)"
          required />
        <small class="text-gray-500">
          Formats recommandés : JPG / PNG
        </small>
      </div>

      <!-- URL -->
      <div class="col-12" *ngIf="posterForm.type !== 'image'">
        <label class="font-semibold">URL</label>
        <input
          pInputText
          type="url"
          name="url"
          [(ngModel)]="posterForm.url"
          placeholder="https://..."
          required />
      </div>

    </div>

  </form>

  <!-- FOOTER -->
  <ng-template pTemplate="footer">
    <p-button
      label="Ajouter le poster"
      icon="pi pi-check"
      (click)="addForm.ngSubmit.emit()"
      [disabled]="addForm.invalid || loading">
    </p-button>

    <p-progressSpinner
      *ngIf="loading"
      [style]="{ width: '20px', height: '20px' }"
      strokeWidth="3">
    </p-progressSpinner>
  </ng-template>

</p-dialog>

<p-dialog
  header="Modifier un poster"
  [(visible)]="showEditDialog"
  [modal]="true"
  [style]="{ width: '45vw' }">

  <form #editForm="ngForm" (ngSubmit)="update()">

    <div class="p-fluid grid">

      <!-- Titre -->
      <div class="col-12">
        <label>Titre</label>
        <input
          pInputText
          name="title"
          [(ngModel)]="posterForm.title"
          required />
      </div>

      <!-- Type -->
      <div class="col-12">
        <label>Type</label>
        <select
          class="p-inputtext w-full"
          name="type"
          [(ngModel)]="posterForm.type"
          required>
          <option value="image">Image</option>
          <option value="video">Vidéo</option>
          <option value="lien">Lien externe</option>
        </select>
      </div>

      <!-- Image -->
      <div class="col-12" *ngIf="posterForm.type === 'image'">
        <label>Nouvelle image (optionnelle)</label>
        <input
          type="file"
          class="p-inputtext w-full"
          (change)="onFileSelect($event)" />
      </div>

      <!-- URL -->
      <div class="col-12" *ngIf="posterForm.type !== 'image'">
        <label>URL</label>
        <input
          pInputText
          type="url"
          name="url"
          [(ngModel)]="posterForm.url"
          required />
      </div>

    </div>

  </form>

  <ng-template pTemplate="footer">
    <p-button
      label="Sauvegarder"
      icon="pi pi-save"
      (click)="editForm.ngSubmit.emit()"
      [disabled]="editForm.invalid || loading">
    </p-button>
  </ng-template>

</p-dialog>
<p-dialog
  header="Détails du poster"
  [(visible)]="showViewDialog"
  [modal]="true"
  [style]="{ width: '40vw' }">

  <div class="p-fluid grid">

    <div class="col-12">
      <strong>Titre :</strong> {{ posterForm.title }}
    </div>

    <div class="col-12">
      <strong>Type :</strong> {{ posterForm.type }}
    </div>

    <!-- Image -->
    <div class="col-12" *ngIf="posterForm.type === 'image'">
      <img
        [src]="posterForm.photo"
        class="w-full border-round shadow-2 mt-2" />
    </div>

    <!-- Lien -->
    <div class="col-12" *ngIf="posterForm.type !== 'image'">
      <a
        [href]="posterForm.url"
        target="_blank"
        class="text-primary underline">
        {{ posterForm.url }}
      </a>
    </div>

  </div>

  <ng-template pTemplate="footer">
    <p-button
      label="Fermer"
      icon="pi pi-times"
      class="p-button-text"
      (click)="showViewDialog = false">
    </p-button>
  </ng-template>

</p-dialog>
